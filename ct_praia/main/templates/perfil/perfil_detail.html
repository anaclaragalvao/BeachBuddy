{% extends 'base.html' %}
{% block title %}Meu Perfil{% endblock %}
{% block body_class %}dashboard-page{% endblock %}
{% block content %}
{% with display_name=display_name|default:request.user.get_username %}
<section class="profile-detail">
    <header class="profile-header">
        <div class="profile-avatar" aria-hidden="true">{{ display_name|first|upper }}</div>
        <div class="profile-heading">
            <span class="profile-heading__eyebrow">Meu perfil</span>
            <h1>{{ display_name }}</h1>
            <p>{{ request.user.email|default:"Nenhum e-mail cadastrado" }}</p>
        </div>
    </header>

    <div class="profile-cards">
        <article class="profile-card">
            <h2>Dados pessoais</h2>
            <dl>
                <div>
                    <dt>Usuário</dt>
                    <dd>{{ request.user.get_username }}</dd>
                </div>
                <div>
                    <dt>Nome completo</dt>
                    <dd>{{ request.user.get_full_name|default:display_name }}</dd>
                </div>
                <div>
                    <dt>Tipo de conta</dt>
                    <dd>
                        {% if perfil %}
                            {{ perfil.get_tipo_display }}
                        {% else %}
                            Superusuário
                        {% endif %}
                    </dd>
                </div>
                <div>
                    <dt>Nível</dt>
                    <dd>
                        {% if perfil and perfil.nivel %}
                            {{ perfil.nivel }}
                        {% else %}
                            <span class="profile-empty">Adicionar nível</span>
                        {% endif %}
                    </dd>
                </div>
            </dl>
        </article>

        <article class="profile-card">
            <h2>Contato</h2>
            <dl>
                <div>
                    <dt>E-mail</dt>
                    <dd>{{ request.user.email|default:"—" }}</dd>
                </div>
                <div>
                    <dt>Telefone</dt>
                    <dd>
                        {% if perfil and perfil.telefone %}
                            {{ perfil.telefone }}
                        {% else %}
                            <span class="profile-empty">Adicionar telefone</span>
                        {% endif %}
                    </dd>
                </div>
            </dl>

            {% if perfil and perfil.tipo == 'PROFESSOR' %}
            <section class="profile-certifications">
                <h3>Certificações</h3>
                {% if certificacoes_list %}
                <ul>
                    {% for cert in certificacoes_list %}
                    <li>{{ cert }}</li>
                    {% endfor %}
                </ul>
                {% else %}
                <p class="profile-empty">Adicione suas certificações para destacar sua experiência.</p>
                {% endif %}
            </section>
            {% endif %}
        </article>
    </div>

    <footer class="profile-actions">
        <a href="{% url 'perfil_editar' %}" class="btn">Editar perfil</a>
    </footer>
</section>
{% endwith %}
{% endblock %} 
